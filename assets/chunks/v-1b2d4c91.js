"use strict";(self.webpackChunkvuepress_theme_hope_template=self.webpackChunkvuepress_theme_hope_template||[]).push([[7678],{3868:(e,t,o)=>{o.r(t),o.d(t,{data:()=>n});const n=JSON.parse('{"key":"v-1b2d4c91","path":"/services/NAS.html","title":"NAS","lang":"zh-CN","frontmatter":{"article":false,"title":"NAS","icon":"process","order":1,"summary":"控制面板－文件服务－SMB－高级设置，将最小 SMB 协议 设为 SMB1，避免部分应用发现了 NAS 但无法打开共享文件。; 控制面板－任务计划 - 新增 - 计划的任务 - 用户定义的脚本，给 NAS 建立定时任务脚本。; SSD 缓存对家用的 NAS 性能提升不大，没必要加。; 群晖系统分布在所有硬盘，拔出一个不影响使用。但应用会有影响？; NAS D","head":[["meta",{"property":"og:url","content":"https://newzone.top/services/NAS.html"}],["meta",{"property":"og:site_name","content":"LearnData-开源学习笔记"}],["meta",{"property":"og:title","content":"NAS"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-08-17T17:12:10.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:modified_time","content":"2022-08-17T17:12:10.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"NAS Docker","slug":"nas-docker","children":[]},{"level":2,"title":"套件配置","slug":"套件配置","children":[]},{"level":2,"title":"影视整理","slug":"影视整理","children":[]},{"level":2,"title":"NAS 硬盘","slug":"nas-硬盘","children":[]}],"git":{"createdTime":1658511538000,"updatedTime":1660756330000,"contributors":[{"name":"rockbenben","email":"qingwhat@gmail.com","commits":7}]},"readingTime":{"minutes":4.27,"words":1280},"filePathRelative":"services/NAS.md","localizedDate":"2022年7月22日"}')},3357:(e,t,o)=>{o.r(t),o.d(t,{default:()=>we});var n=o(8e3);const r=(0,n.uE)('<ul><li><code>控制面板－文件服务－SMB－高级设置</code>，将最小 SMB 协议 设为 SMB1，避免部分应用发现了 NAS 但无法打开共享文件。</li><li><code>控制面板－任务计划 - 新增 - 计划的任务 - 用户定义的脚本</code>，给 NAS 建立定时任务脚本。</li><li>SSD 缓存对家用的 NAS 性能提升不大，没必要加。</li><li>群晖系统分布在所有硬盘，拔出一个不影响使用。但应用会有影响？</li></ul><h2 id="nas-docker" tabindex="-1"><a class="header-anchor" href="#nas-docker" aria-hidden="true">#</a> NAS Docker</h2><p>NAS 上推荐用 <code>docker-compose.yml</code> 安装 Docker，镜像会自动同步到群晖的 Docker 列表中。</p>',3),a=(0,n.Uk)("docker-compose 使用参考 "),l={href:"http://ttrss.henry.wang/zh/#%E9%80%9A%E8%BF%87-docker-compose-%E9%83%A8%E7%BD%B2",target:"_blank",rel:"noopener noreferrer"},s=(0,n.Uk)("TTRSS docker-compose"),i=(0,n.Uk)("。"),c=(0,n.uE)('<ol><li>打开 <code>控制面板</code>-<code>终端机和 SNMP</code>，启动 SSH 功能。</li><li>putty 连接群晖 SSH，进入 <code>docker-compose.yml</code> 所在路径，比如 <code>cd /volume3/storage</code>。</li><li>通过终端在同目录下运行 <code>sudo docker-compose up -d</code> 后等待部署完成。</li><li>关闭 SSH 功能。</li></ol><p>注意：</p><ul><li>非 root 用户需在命令前添加 <code>sudo</code>，否则会提示 <code>Permission denied</code>。</li><li>升级镜像，不影响内部数据库。</li><li>「群晖导出」会导出安装镜像和配置，但不包括使用的数据库。</li></ul><h2 id="套件配置" tabindex="-1"><a class="header-anchor" href="#套件配置" aria-hidden="true">#</a> 套件配置</h2>',4),d=(0,n._)("li",null,"DS/Transmission：用于 PT 下载 (禁用 DHT，半小时停止做种)。",-1),p=(0,n._)("li",null,"Synology Drive Server：电脑文件备份。",-1),u=(0,n.Uk)("Docker：指定本地端口否则重启会变，重启不影响 docker 配置。 "),h=(0,n._)("li",null,"RSSHub：无需保存数据，pubData 为 GMT 时区，普通用户无法更改，Docker Timezone 设置也不会有改变。",-1),m=(0,n._)("li",null,"Huginn：定期备份抓取脚本，数据库保存在本地。",-1),k=(0,n.Uk)("Tiny Tiny RSS：定期备份订阅源和设置，自动更新。 "),f={href:"https://registry.hub.docker.com/r/wangqiru/mercury-parser-api",target:"_blank",rel:"noopener noreferrer"},_=(0,n.Uk)("mercury-parser-api"),b=(0,n.Uk)("：全文插件"),g={href:"https://github.com/AragonSnow/qiandao",target:"_blank",rel:"noopener noreferrer"},v=(0,n.Uk)("qiandao"),S=(0,n.Uk)("：自动签到开源框架，需搭配浏览器扩展 "),U={href:"https://github.com/ckx000/get-cookies",target:"_blank",rel:"noopener noreferrer"},A=(0,n.Uk)("get-cookies"),w=(0,n.Uk)(" 使用，可导出配置。"),y={href:"https://containrrr.dev/watchtower/",target:"_blank",rel:"noopener noreferrer"},N=(0,n.Uk)("watchtower"),T=(0,n.Uk)("：监控并更新 Docker 容器。 "),D=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n.Uk)("监控指定名称的镜像："),(0,n._)("code",null,"docker run -d --name watchtower -v /var/run/docker.sock:/var/run/docker.sock containrrr/watchtower --cleanup --run-once nginx redis"),(0,n.Uk)("。本案例只更新名为“nginx”和“redis”的容器，其他容器将被忽略。")]),(0,n._)("li",null,[(0,n.Uk)("指定容器的 compose 命令中添加 lable "),(0,n._)("code",null,"com.centurylinklabs.watchtower.enable=false"),(0,n.Uk)("，可禁止该容器的监控和更新。")])],-1),E={href:"https://github.com/easychen/checkchan-dist",target:"_blank",rel:"noopener noreferrer"},W=(0,n.Uk)("Check 酱"),x=(0,n.Uk)("：监测网页内容变化，并发送异动到微信。亦支持 http status、json 和 rss 监测。配合自架云端，关电脑后也能运行。"),B={href:"https://www.home-assistant.io/",target:"_blank",rel:"noopener noreferrer"},M=(0,n.Uk)("Home Assistant"),H=(0,n.Uk)("：开源家庭自动化平台，可自定义集中管理各品牌的智能家居设备。米家设备需使用 hacs 下的集成 "),R=(0,n.Uk)("Xiaomi Miot Auto"),$=(0,n.Uk)("。"),z=(0,n.Uk)("Node-RED"),C=(0,n.Uk)("：开源流处理，类似本地版的 IFTTT。"),I=(0,n.Uk)("待了解 "),q={href:"https://blog.csdn.net/alex_yangchuansheng/article/details/122295193",target:"_blank",rel:"noopener noreferrer"},P=(0,n.Uk)("n8n"),F=(0,n.Uk)("：开源 IFTTT 工具，偏重于云服务。"),L={href:"https://github.com/EstrellaXD/Auto_Bangumi",target:"_blank",rel:"noopener noreferrer"},Z=(0,n.Uk)("AutoBangumi"),O=(0,n.Uk)("：自动追番器，用以替代自我审查的 Bilibili。"),j={href:"https://github.com/jxxghp/nas-tools/wiki/%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"},X=(0,n.Uk)("nas-tools"),G=(0,n.Uk)("：号称能自动整理文件，但测试识别中很容易出错，暂不考虑。 "),J=(0,n._)("ul",null,[(0,n._)("li",null,"qbittorrent：Linux 版本提示出错。")],-1),K=(0,n._)("li",null,"Emby、Plex：流媒体方案，暂不考虑。",-1),Q=(0,n._)("li",null,"HomeAssistant：开源智能家居平台",-1),V=(0,n._)("li",null,"Clash：代理服务器",-1),Y=(0,n._)("h2",{id:"影视整理",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#影视整理","aria-hidden":"true"},"#"),(0,n.Uk)(" 影视整理")],-1),ee=(0,n._)("p",null,"下载文件后，用 tinyMediaManager 重命名并下载 NFO 和影视封面，最后放置于分类文件夹。",-1),te={href:"https://www.tinymediamanager.org/download/",target:"_blank",rel:"noopener noreferrer"},oe=(0,n.Uk)("tinyMediaManager"),ne=(0,n.Uk)(" v4 免费版足够个人使用，v3 作偶尔补充使用，搜索首选语言改为「大陆简体」更精准。"),re=(0,n._)("sup",{class:"footnote-ref"},[(0,n._)("a",{href:"#footnote1"},"[1]"),(0,n._)("a",{class:"footnote-anchor",id:"footnote-ref1"})],-1),ae=(0,n.uE)('<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 电视节目重命名规则</span>\n季文件夹名：Season <span class="token variable">${seasonNr}</span>\n剧集档案名：<span class="token variable">${showTitle}</span> - S<span class="token variable">${seasonNr2}</span>E<span class="token variable">${episodeNr2}</span> - <span class="token variable">${title}</span>\n\n<span class="token comment"># 当只有一季时，则更改重命名规则</span>\n季文件夹名：为空时，会自动调用默认值\n剧集档案名：<span class="token variable">${showTitle}</span> - E<span class="token variable">${episodeNr2}</span>\n\n<span class="token comment"># 多季，有标题时</span>\n剧集档案名：<span class="token variable">${showTitle}</span> - E<span class="token variable">${episodeNr2}</span> - <span class="token variable">${title}</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nas-硬盘" tabindex="-1"><a class="header-anchor" href="#nas-硬盘" aria-hidden="true">#</a> NAS 硬盘</h2><p>插入新硬盘，新建储存空间，使用 Btrfs 或 Basic 格式。SHR 是群晖的智能 RAID 格式，不适用于硬盘容量不同的情况。</p><table><thead><tr><th>硬盘</th><th>容量</th><th>到期时间（5 年）</th></tr></thead><tbody><tr><td>硬盘 1</td><td>10T</td><td>2025-06-18</td></tr><tr><td>硬盘 2</td><td>4T</td><td>2023-01-24</td></tr><tr><td>硬盘 3</td><td>14T</td><td>2027-02-11</td></tr><tr><td>硬盘 4</td><td>8T</td><td>2026-01-06</td></tr><tr><td>冷备份</td><td>2T</td><td>2014-10</td></tr></tbody></table><p>换下的机械硬盘做冷备份，存储照片等长期数据。</p><p>硬盘临期后，用大容量硬盘替换。考虑进入 <code>存储池 - 更改 RAID 类型</code>，无损转换 basic 到 Raid1。不过，不同容量硬盘组 RAID，只能以最小磁盘容量计使用空间。</p><p>更换硬盘后，注意将数据连同文件夹用 file station 复制过去 (按住 Shift 选中所有你要的文件点右键 移动到...)，关机卸载旧盘。如果该硬盘涉及套件位置，注意检查设置。<sup class="footnote-ref"><a href="#footnote2">[2]</a><a class="footnote-anchor" id="footnote-ref2"></a></sup></p><p>共享文件迁移：进入 <code>控制面板-共享文件夹</code>，把你的共享文件夹位置修改到新储存空间。<sup class="footnote-ref"><a href="#footnote3">[3]</a><a class="footnote-anchor" id="footnote-ref3"></a></sup></p><hr class="footnotes-sep">',9),le={class:"footnotes"},se={class:"footnotes-list"},ie={id:"footnote1",class:"footnote-item"},ce={href:"https://post.smzdm.com/p/a0d67m2z/",target:"_blank",rel:"noopener noreferrer"},de=(0,n.Uk)("群晖 NAS 使用 Emby+tMM 打造全平台观影畅爽体验（附下载地址）"),pe=(0,n.Uk)(),ue=(0,n._)("a",{href:"#footnote-ref1",class:"footnote-backref"},"↩︎",-1),he={id:"footnote2",class:"footnote-item"},me={href:"https://www.bigzhang.com/3264.html",target:"_blank",rel:"noopener noreferrer"},ke=(0,n.Uk)("如何把群晖 NAS 上的套件搬到另外个硬盘上"),fe=(0,n.Uk)(),_e=(0,n._)("a",{href:"#footnote-ref2",class:"footnote-backref"},"↩︎",-1),be={id:"footnote3",class:"footnote-item"},ge={href:"https://blog.csdn.net/hilaryfrank/article/details/109722319",target:"_blank",rel:"noopener noreferrer"},ve=(0,n.Uk)("群晖 NAS 跨存储空间移动共享文件夹 (NAS 新增磁盘)"),Se=(0,n.Uk)(),Ue=(0,n._)("a",{href:"#footnote-ref3",class:"footnote-backref"},"↩︎",-1),Ae={},we=(0,o(1935).Z)(Ae,[["render",function(e,t){const o=(0,n.up)("ExternalLinkIcon"),Ae=(0,n.up)("RouterLink");return(0,n.wg)(),(0,n.iD)("div",null,[r,(0,n._)("p",null,[a,(0,n._)("a",l,[s,(0,n.Wm)(o)]),i]),c,(0,n._)("ul",null,[d,p,(0,n._)("li",null,[u,(0,n._)("ul",null,[h,m,(0,n._)("li",null,[k,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",f,[_,(0,n.Wm)(o)]),b])])]),(0,n._)("li",null,[(0,n._)("a",g,[v,(0,n.Wm)(o)]),S,(0,n._)("a",U,[A,(0,n.Wm)(o)]),w]),(0,n._)("li",null,[(0,n._)("a",y,[N,(0,n.Wm)(o)]),T,D]),(0,n._)("li",null,[(0,n._)("a",E,[W,(0,n.Wm)(o)]),x]),(0,n._)("li",null,[(0,n._)("a",B,[M,(0,n.Wm)(o)]),H,(0,n.Wm)(Ae,{to:"/family/HomeAutomation.html#home-assistant"},{default:(0,n.w5)((()=>[R])),_:1}),$]),(0,n._)("li",null,[(0,n.Wm)(Ae,{to:"/family/HomeAutomation.html#node-red"},{default:(0,n.w5)((()=>[z])),_:1}),C]),(0,n._)("li",null,[I,(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("a",q,[P,(0,n.Wm)(o)]),F]),(0,n._)("li",null,[(0,n._)("a",L,[Z,(0,n.Wm)(o)]),O]),(0,n._)("li",null,[(0,n._)("a",j,[X,(0,n.Wm)(o)]),G,J]),K,Q,V])])])])]),Y,ee,(0,n._)("p",null,[(0,n._)("a",te,[oe,(0,n.Wm)(o)]),ne,re]),ae,(0,n._)("section",le,[(0,n._)("ol",se,[(0,n._)("li",ie,[(0,n._)("p",null,[(0,n._)("a",ce,[de,(0,n.Wm)(o)]),pe,ue])]),(0,n._)("li",he,[(0,n._)("p",null,[(0,n._)("a",me,[ke,(0,n.Wm)(o)]),fe,_e])]),(0,n._)("li",be,[(0,n._)("p",null,[(0,n._)("a",ge,[ve,(0,n.Wm)(o)]),Se,Ue])])])])])}]])},1935:(e,t)=>{t.Z=(e,t)=>{const o=e.__vccOpts||e;for(const[e,n]of t)o[e]=n;return o}}}]);