"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[459],{1013:(e,t,n)=>{n.r(t),n.d(t,{data:()=>l});const l=JSON.parse('{"key":"v-8156ca5a","path":"/_posts/2022-05-22-surveillance_video_for_myself.html","title":"疫情封控两个月后，我对自己开始 24 小时的自我监控录像","lang":"zh-CN","frontmatter":{"title":"疫情封控两个月后，我对自己开始 24 小时的自我监控录像","date":"2022-05-22T00:00:00.000Z","category":["头脑驿站"],"tag":["录屏","自我管理"],"order":-46,"summary":"疫情封控两个月后，人变得愈发懒散，每天的成果只有吃饭睡觉。为了摆脱这种状态，我决定在书房对自己进行 24 小时的监控录像，督促自己提升效率。 自我监控方案有两点需求：首先，软硬件必须在本地操作、储存，绝对不能联网；其次工作中途经常离开书房，回放时能跳过无人片段。 寻找监控工具： 视频剪辑软件：自动识别长时间静止的画面，删除或加速相关视频帧。; 录屏软件：带移","head":[["meta",{"property":"og:url","content":"https://newzone.top/_posts/2022-05-22-surveillance_video_for_myself.html"}],["meta",{"property":"og:site_name","content":"LearnData-开源学习笔记"}],["meta",{"property":"og:title","content":"疫情封控两个月后，我对自己开始 24 小时的自我监控录像"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:updated_time","content":"2022-07-27T07:28:24.000Z"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:tag","content":"录屏"}],["meta",{"property":"article:tag","content":"自我管理"}],["meta",{"property":"article:published_time","content":"2022-05-22T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2022-07-27T07:28:24.000Z"}]]},"excerpt":"","headers":[{"level":2,"title":"自我监控方案","slug":"自我监控方案","children":[]},{"level":2,"title":"监控准备","slug":"监控准备","children":[]},{"level":2,"title":"录制视频：VLC","slug":"录制视频-vlc","children":[]},{"level":2,"title":"剪辑视频：DVR-Scan","slug":"剪辑视频-dvr-scan","children":[]},{"level":2,"title":"播放降噪：PotPlayer","slug":"播放降噪-potplayer","children":[]},{"level":2,"title":"总结","slug":"总结","children":[]}],"git":{"createdTime":1658906904000,"updatedTime":1658906904000,"contributors":[{"name":"rockbenben","email":"qingwhat@gmail.com","commits":1}]},"readingTime":{"minutes":8.32,"words":2496},"filePathRelative":"_posts/2022-05-22-surveillance_video_for_myself.md","localizedDate":"2022年5月22日"}')},4439:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ge});var l=n(8e3);const r=(0,l.uE)('<p>疫情封控两个月后，人变得愈发懒散，每天的成果只有吃饭睡觉。为了摆脱这种状态，我决定在书房对自己进行 24 小时的监控录像，督促自己提升效率。</p><p>自我监控方案有两点需求：首先，软硬件必须在本地操作、储存，绝对不能联网；其次工作中途经常离开书房，回放时能跳过无人片段。</p><p><strong>寻找监控工具</strong>：</p><ul><li>视频剪辑软件：自动识别长时间静止的画面，删除或加速相关视频帧。</li><li>录屏软件：带移动侦测功能，检测到人则开启录像，无人则自动暂停，无需联网就能使用。</li><li>播放软件：自动跳过超过 10s 的静止画面。</li><li>直连电脑的摄像机：不联网，不用 SD 卡将视频直接存储在电脑上。虽然萤石、小米有移动侦测功能，但视频需上传云端，风险过大。</li></ul><p>找了许久，始终找不到合适的工具。监控摄像头和行车记录仪能跳过静止画面，但这类工具都不能直连电脑，且限制很多，不方便后期回放剪辑。</p><p>最后靠着少数派群友 @chen 的推荐，尝试 DVR-Scan，补完了自我监控方案。</p><h2 id="自我监控方案" tabindex="-1"><a class="header-anchor" href="#自我监控方案" aria-hidden="true">#</a> 自我监控方案</h2>',7),a=(0,l._)("strong",null,"晨间唤醒",-1),o=(0,l.Uk)("：起床后，用手机单独录一句话。这句话在前一天准备好，包括日期、当日目标，也可以引入美好的回忆、憧憬的未来、向往的地方、喜欢的艺术 (音乐、名画、诗句)。 晨间唤醒参考了"),i={href:"https://www.xuetangx.com/course/THU07111001088/",target:"_blank",rel:"noopener noreferrer"},s=(0,l.Uk)("积极心理学"),c=(0,l.Uk)("，收集积极情绪材料，给自己创造美好的情绪。"),d=(0,l._)("li",null,[(0,l._)("strong",null,"录制视频"),(0,l.Uk)("：用 VLC 和摄像头录制视频，按计划开始工作学习。")],-1),p=(0,l._)("li",null,[(0,l._)("strong",null,"过滤视频"),(0,l.Uk)("：晚上 11 点，DVR-Scan 过滤静止视频片段，记录录制时长和处理后的视频时长。 "),(0,l._)("img",{src:"http://tc.seoipo.com/2022-05-22-10-05-04.png",alt:"视频时长记录表格",loading:"lazy"})],-1),m=(0,l._)("li",null,[(0,l._)("strong",null,"视频回放"),(0,l.Uk)("：100x 倍速回放工作视频，检查工作效率和成果。如果需要听声音，则使用 PotPlayer 播放降噪，剪辑出要使用的片段。原始视频和过滤视频保存一月，定期清理。")],-1),h=(0,l._)("li",null,[(0,l._)("strong",null,"当日回顾"),(0,l.Uk)("：记录 3 件好事，总结好事发生的原因。 这可以是日常生活中常见的小事，比如读到一本好书、吃到一道好菜、听到一个亲友的好消息、在公交车上有人为你让座、孩子今天会走路了，等等。")],-1),u=(0,l._)("p",null,"接下来，将详述自我监控方案的准备、流程及遇到的问题。",-1),g=(0,l._)("h2",{id:"监控准备",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#监控准备","aria-hidden":"true"},"#"),(0,l.Uk)(" 监控准备")],-1),_=(0,l._)("p",null,"自我监控方案的硬件需要摄像头、电脑，软件则使用 VLC、DVR-Scan、PotPlayer。",-1),k=(0,l._)("p",null,"摄像头预算一百左右就行，之前买过上千的罗技摄像头，画质并未有明显区别。",-1),v=(0,l._)("p",null,"收音设备使用的是摄像头自带的麦克风。之所以不用桌面的声卡外接话筒，是因为容易有回音，杂音更重。",-1),b=(0,l._)("h2",{id:"录制视频-vlc",tabindex:"-1"},[(0,l._)("a",{class:"header-anchor",href:"#录制视频-vlc","aria-hidden":"true"},"#"),(0,l.Uk)(" 录制视频：VLC")],-1),f=(0,l._)("p",null,"摄像头录像方案较少，大多是录屏软件的附带功能，我尝试了以下 9 种：",-1),y=(0,l._)("li",null,"相机：Windows 自带应用，录制方便，但不能调节输出选项。",-1),U={href:"https://www.flashbackrecorder.com/zh/express/",target:"_blank",rel:"noopener noreferrer"},V=(0,l.Uk)("FlashBack Express"),C=(0,l.Uk)("：能调节帧率，镜像，虚化背景，但免费版只支持 2 小时内的录制。"),S={href:"https://www.bandicam.cn/",target:"_blank",rel:"noopener noreferrer"},w=(0,l.Uk)("Bandicam"),D=(0,l.Uk)("：录制时能抑制噪音，同步录制扬声器音频，自由调节编码、帧率，但免费版只支持录制 10 分钟且有水印。"),P={href:"https://mirillis.com/zh/products/action.html",target:"_blank",rel:"noopener noreferrer"},x=(0,l.Uk)("Mirillis Action!"),R=(0,l.Uk)("：高帧率录制游戏，自动分割视频，自定义叠加元素，但输入帧率不能自由调整，最低只能 15 帧，试用期 30 天。"),W={href:"https://ohsoft.net/eng/ocam/intro.php?cate=1002",target:"_blank",rel:"noopener noreferrer"},T=(0,l.Uk)("oCam"),z=(0,l.Uk)("：打着免费招牌但有弹窗广告，且录制视频偏大。"),L={href:"https://getsharex.com/",target:"_blank",rel:"noopener noreferrer"},N=(0,l.Uk)("ShareX"),M=(0,l.Uk)("：免费开源强大的截图软件，也具备录屏功能，能调节编码和帧率，但只能单一录屏或录像。"),O={href:"https://github.com/MathewSachin/Captura/releases/tag/v8.0.0",target:"_blank",rel:"noopener noreferrer"},E=(0,l.Uk)("Capture"),B=(0,l.Uk)("：免费开源，使用前需手动"),H={href:"https://blog.csdn.net/dglx_/article/details/122389601",target:"_blank",rel:"noopener noreferrer"},Z=(0,l.Uk)("配置 ffmpeg"),q=(0,l.Uk)("，自定义叠加元素，但项目已停止更新。推荐录制配置为 "),A=(0,l._)("code",null,"FPS:10, Quality:30%",-1),F=(0,l.Uk)("。"),I={href:"https://obsproject.com/",target:"_blank",rel:"noopener noreferrer"},Q=(0,l.Uk)("OBS"),j=(0,l.Uk)("：免费开源直播软件，也可以录制视频，操作性极强，但我工作时同时在多路推流直播，无法同时录制摄像头。"),G={href:"https://www.videolan.org/vlc/",target:"_blank",rel:"noopener noreferrer"},J=(0,l.Uk)("VLC"),X=(0,l.Uk)("：免费开源视频软件，能调节输出视频的编码、帧率、格式，几乎全能，相同环节下输出视频最小，但操作麻烦，只能单一录屏或录像，暂停录制容易有 bug。"),K=(0,l.uE)('<p>Bandicam、Mirillis Action！录制时，电脑无法进入睡眠，ManicTime 也不能检测到你的离开状态。</p><p>监控方案的单次录制时间在 12 小时以上，需要调低帧率以控制视频大小，选择了 VLC 作为录制软件。如果你要同时录屏和录像，可以使用 OBS、Capture 或 oCam。</p><p><strong>录制过程：</strong></p><ol><li><p>打开 VLC 的 Media -&gt; Open Capture Device，将 <code>Video device name</code> 和 <code>Audio device name</code> 选为摄像头，然后点击底部 <code>Play</code> 按钮旁边的下拉菜单，选中 <code>Convert</code>。</p><p><img src="http://tc.seoipo.com/2022-05-21-22-09-08.png" alt="" loading="lazy"></p></li><li><p>Settings -&gt; Profile 中选择视频输出方案，推荐选择 <code>Video - H.264 + MP3 (MP4)</code>，接着点击旁边的扳手按钮，修改输出方案。</p><p><img src="http://tc.seoipo.com/2022-05-21-22-11-09.png" alt="" loading="lazy"></p></li><li><p>Profile edition -&gt; Video codec -&gt; Encoding parameters，依次调整视频的编码、比特率、画面质量、帧率，编码建议使用 H-264，码率推荐 10 fps。</p><p><img src="http://tc.seoipo.com/2022-05-21-22-12-32.png" alt="" loading="lazy"></p></li><li><p>Destination file 设置输出路径和视频名称。</p></li></ol><h2 id="剪辑视频-dvr-scan" tabindex="-1"><a class="header-anchor" href="#剪辑视频-dvr-scan" aria-hidden="true">#</a> 剪辑视频：DVR-Scan</h2><p>过滤视频的静态画面，是监控方案中的核心环节。开始我考虑用 QuickCut 过滤，但它是通过声音来判断视频是否静止（与飞书妙记的「跳过空白片段」原理类似），监控视频中大部分时间是没声音的，不适合用 QuickCut 剪辑。</p>',6),Y=(0,l.Uk)("群里 @chen 推荐了 "),$={href:"https://github.com/Breakthrough/DVR-Scan",target:"_blank",rel:"noopener noreferrer"},ee=(0,l.Uk)("DVR-Scan"),te=(0,l.Uk)("，能从画面判断是否需要过滤。"),ne=(0,l.uE)('<blockquote><p>DVR-Scan 是一个跨平台命令行（CLI）应用程序，可以自动检测视频文件中的运动事件（例如安全摄像头镜头）。除了定位每个运动事件的时间和持续时间外，DVR 扫描还将每个运动事件的片段保存到一个新的单独的视频剪辑中。DVR-Scan 免费开源软件（FOSS）是用 Python 编写的，并且基于 Numpy 和 OpenCV，而且可以扩展和黑客入侵。</p></blockquote><p>DVR-Scan 操作很简单，视频目录内右键点击「在终端打开」，执行默认输出命令即可得到过滤后的视频。12 小时的视频，处理用时二十分钟，会占用大量 CPU。有点要注意，DVR-Scan 有个限制，只能导出为<code>.avi</code>视频。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#默认输出命令</span>\ndvr-scan -i some_video.mp4 -o some_video_motion_only.avi\n\n<span class="token comment"># -t 是 DVR-Scan 的动作检测敏感度，默认为 0.15，越低则越敏感</span>\n<span class="token comment">#下列命令将敏感度调为 0.5，最大程度的删除静止画面帧</span>\ndvr-scan -t <span class="token number">0.5</span> -i some_video.mp4 -o some_video_motion_only.avi\n\n<span class="token comment"># -b 是 DVR-Scan 的算法，默认为 MOG，追求速度则使用 CNT</span>\n<span class="token comment">#最快速度的删除静止画面帧，但会牺牲准确率，有更多的静止画面帧被留存</span>\ndvr-scan -b CNT -i some_video.mp4 -o some_video_motion_only.avi\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>DVR-Scan 不同命令的测试效果如下：</p><table><thead><tr><th>命令</th><th>耗时（s）</th><th>输出视频（mins）</th></tr></thead><tbody><tr><td>默认</td><td>124</td><td>07:15</td></tr><tr><td>-t 0.5</td><td>125</td><td>06:52</td></tr><tr><td>-b CNT</td><td>107</td><td>10:05</td></tr><tr><td>-t 0.5 -b CNT</td><td>104</td><td>08:39</td></tr></tbody></table><p>另外，DVR-Scan 可以使用 <code>-roi</code> 命令，指定监测区域，只对该区域的动作进行监测。</p>',6),le=(0,l.Uk)("DVR-Scan 进阶命令查看 "),re={href:"https://dvr-scan.readthedocs.io/en/latest/guide/examples/",target:"_blank",rel:"noopener noreferrer"},ae=(0,l.Uk)("官方文档"),oe=(0,l.Uk)("。"),ie=(0,l.uE)('<h2 id="播放降噪-potplayer" tabindex="-1"><a class="header-anchor" href="#播放降噪-potplayer" aria-hidden="true">#</a> 播放降噪：PotPlayer</h2><p>桌面录音容易有较大的噪音，重新处理的话需要大量时间，因此我将降噪环节放在视频播放器中处理。</p><ul><li><strong>开启降噪</strong>：风噪等一系列噪声会消失，但是带过降噪耳机的都知道，开启降噪会有一种很糊的感觉，这时视频的声音就会变得无比无比的糊。</li><li><strong>开启语音增强</strong>：语音增强会在很糊的声音中明显听到人的声音，但是还是略显不足，还是有点杂，而且声音特别大。</li><li><strong>关闭规格化</strong>：这时声音就不会那么大，也不会过于杂了，这时的声音已经相比处理前干净多了。</li><li><strong>开启超高音</strong>：打开均衡器，选择「超高音」方案。 <img src="http://tc.seoipo.com/2022-05-19-10-47-18.png" alt="PotPlayer 播放降噪设置" loading="lazy"></li></ul><p>设置完成后，播放时 PotPlayer 会自动对视频进行降噪，无需额外花时间处理视频。</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>自我监控分为 5 步，晨间唤醒：计划 --&gt; 录制视频：VLC --&gt; 过滤视频：DVR-Scan --&gt; 视频回放：PotPlayer --&gt; 当日回顾。录制与过滤环节可以由脚本自动完成，我设定开机自动录制视频，然后晚上 9 点停止录制并自动过滤当天视频。</p><p>经过几天的自我监控后，我对于自己的活动有了更清晰的认知，方便进行控制、修正。监控视频存储在本地，不对第三方开放，也可以很放心地做自己。每日回顾中，直面自己的缺点、错误，积极地调整。</p><p><strong>参考资料：</strong></p>',8),se={href:"https://askubuntu.com/questions/422341/how-can-i-detect-motion-in-a-long-mostly-dull-video/423028#423028",target:"_blank",rel:"noopener noreferrer"},ce=(0,l.Uk)("How can I detect motion in a long, mostly dull video?"),de={href:"https://blog.csdn.net/NeiHan2020/article/details/118368739",target:"_blank",rel:"noopener noreferrer"},pe=(0,l.Uk)("如何设置 potplayer 播放器把人声凸显出来并降噪？"),me={href:"https://www.xuetangx.com/course/THU07111001088/",target:"_blank",rel:"noopener noreferrer"},he=(0,l.Uk)("网课：积极心理学"),ue={},ge=(0,n(1935).Z)(ue,[["render",function(e,t){const n=(0,l.up)("ExternalLinkIcon");return(0,l.wg)(),(0,l.iD)("div",null,[r,(0,l._)("ol",null,[(0,l._)("li",null,[a,o,(0,l._)("a",i,[s,(0,l.Wm)(n)]),c]),d,p,m,h]),u,g,_,k,v,b,f,(0,l._)("ol",null,[y,(0,l._)("li",null,[(0,l._)("a",U,[V,(0,l.Wm)(n)]),C]),(0,l._)("li",null,[(0,l._)("a",S,[w,(0,l.Wm)(n)]),D]),(0,l._)("li",null,[(0,l._)("a",P,[x,(0,l.Wm)(n)]),R]),(0,l._)("li",null,[(0,l._)("a",W,[T,(0,l.Wm)(n)]),z]),(0,l._)("li",null,[(0,l._)("a",L,[N,(0,l.Wm)(n)]),M]),(0,l._)("li",null,[(0,l._)("a",O,[E,(0,l.Wm)(n)]),B,(0,l._)("a",H,[Z,(0,l.Wm)(n)]),q,A,F]),(0,l._)("li",null,[(0,l._)("a",I,[Q,(0,l.Wm)(n)]),j]),(0,l._)("li",null,[(0,l._)("a",G,[J,(0,l.Wm)(n)]),X])]),K,(0,l._)("p",null,[Y,(0,l._)("a",$,[ee,(0,l.Wm)(n)]),te]),ne,(0,l._)("p",null,[le,(0,l._)("a",re,[ae,(0,l.Wm)(n)]),oe]),ie,(0,l._)("ul",null,[(0,l._)("li",null,[(0,l._)("a",se,[ce,(0,l.Wm)(n)])]),(0,l._)("li",null,[(0,l._)("a",de,[pe,(0,l.Wm)(n)])]),(0,l._)("li",null,[(0,l._)("a",me,[he,(0,l.Wm)(n)])])])])}]])},1935:(e,t)=>{t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,l]of t)n[e]=l;return n}}}]);